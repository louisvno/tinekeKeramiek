//var cloudStorage = firebase.storage();
var database = firebase.database();


//var storageRef = cloudStorage.ref();
//var mountainImagesRef = storageRef.child('images/mountains.txt')
//
//
//function uploadImage(){ 
//    // use the Blob or File API
//    var file = document.getElementById('file1').files[0];
//    mountainImagesRef.put(file).then(function(snapshot) {
//      console.log('Uploaded a blob or file!');
//    });
//}

var postsRef = database.ref().child("posts");

 //Generate a reference to a new location and add some data using push()
var newPostRef = postsRef.push();

// Get the unique key generated by push()
var postId = newPostRef.key;

function writePostData(userId, publishDate, text, title, category, images){
    return {
        userId : userId,
        publishDate : publishDate,
        text : text,
        title: title,
        category : category,
        images : {
                img1 : {
                        link: images[0].link,
                        name:   images[0].name,
                        desc: images [0].desc
                        } 
                 }
    };
}
var postData = writePostData(28,2992,"hello","world","music",[{link:"lll",name:"koll",desc:"kjkd"}])

// var updates = {};
//  updates['/posts/' + postId] = postData;
firebase.database().ref("posts/" + postId).set(postData);



// Try to create a user for ada, but only if the user id 'ada' isn't
// already taken
//var adaRef = firebase.database().ref('users/ada');
//adaRef.transaction(function(currentData) {
//  if (currentData === null) {
//    return { name: { first: 'Ada', last: 'Lovelace' } };
//  } else {
//    console.log('User ada already exists.');
//    return; // Abort the transaction.
//  }
//}, function(error, committed, snapshot) {
//  if (error) {
//    console.log('Transaction failed abnormally!', error);
//  } else if (!committed) {
//    console.log('We aborted the transaction (because ada already exists).');
//  } else {
//    console.log('User ada added!');
//  }
//  console.log("Ada's data: ", snapshot.val());
//});
